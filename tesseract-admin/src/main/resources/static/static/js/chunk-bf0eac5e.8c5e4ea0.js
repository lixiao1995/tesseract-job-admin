(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf0eac5e"],{1832:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.getters.buttons.contains("/runTrigger/index/select")?n("div",{staticClass:"app-container"},[n("el-row",[n("el-form",{attrs:{inline:!0,model:e.selectInfo}},[n("div",{staticStyle:{display:"inline"}},[n("el-form-item",{attrs:{label:"触发器名称"}},[n("el-input",{attrs:{placeholder:"执行器名称"},model:{value:e.selectInfo.triggerName,callback:function(t){e.$set(e.selectInfo,"triggerName",t)},expression:"selectInfo.triggerName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"创建人"}},[n("el-input",{attrs:{placeholder:"创建人"},model:{value:e.selectInfo.creator,callback:function(t){e.$set(e.selectInfo,"creator",t)},expression:"selectInfo.creator"}})],1),e._v(" "),n("el-form-item",[e.$store.getters.buttons.contains("/runTrigger/index/select")?n("el-button",{attrs:{type:"primary"},on:{click:e.getAllFiredTrigger}},[e._v("查询\n          ")]):e._e()],1)],1)])],1),e._v(" "),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.firedTriggerList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))])]}}],null,!1,773642443)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"触发器名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.triggerName))])]}}],null,!1,3242678905)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"执行类名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.className))])]}}],null,!1,3979893391)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"执行机器"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.socket))])]}}],null,!1,2967606403)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"执行器组"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.groupName))])]}}],null,!1,326398910)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"重复次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.retryCount))])]}}],null,!1,3919601357)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"分片索引"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.shardingIndex))])]}}],null,!1,550115988)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建者"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.creator))])]}}],null,!1,2618699994)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0==t.row.createTime?"":e.parseTime(t.row.createTime)))])]}}],null,!1,1738915794)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$store.getters.buttons.contains("/runTrigger/index/delete")?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(n){return e.stopExecutor(t.row)}}},[e._v("\n            停止并删除\n          ")]):e._e()]}}],null,!1,2111018364)})],1)],1),e._v(" "),n("el-row",[n("el-pagination",{attrs:{total:e.selectInfo.total,"current-page":e.selectInfo.currentPage,"page-size":e.selectInfo.pageSize,align:"center",background:"",layout:"prev, pager, next"},on:{"current-change":e.pageChange}})],1)],1):n("div",{staticClass:"app-container"},[n("p",{staticStyle:{color:"red"}},[e._v("您当前没有权限")])])},l=[],o=n("a888"),a=n("4303"),i=n("ed08"),c={name:"RunTrigger",directives:{elDragDialog:o["a"]},data:function(){return{listLoading:!0,firedTriggerList:[],selectInfo:{currentPage:1,pageSize:10,total:0},firedTriggerInfo:{name:null,description:null}}},mounted:function(){this.getAllFiredTrigger()},methods:{pageChange:function(e){this.selectInfo.currentPage=e,this.getAllFiredTrigger()},parseTime:i["d"],getAllFiredTrigger:function(){var e=this;Object(a["d"])(this.selectInfo).then((function(t){e.selectInfo.currentPage=t.pageInfo.currentPage,e.selectInfo.pageSize=t.pageInfo.pageSize,e.selectInfo.total=t.pageInfo.total,e.firedTriggerList=t.firedTriggerList,e.listLoading=!1}))},handleDrag:function(){this.$refs.select.blur()},stopExecutor:function(e){var t=this;this.$confirm("此操作将永久删除并且停止当前任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["g"])({firedTriggerId:e.id}).then((function(){t.$alert("停止成功"),t.getAllFiredTrigger()}))}))}}},s=c,u=n("4e82"),g=Object(u["a"])(s,r,l,!1,null,"e77d8590",null);t["default"]=g.exports},4303:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return g}));var r=n("b775");function l(e){return Object(r["a"])({url:"/tesseract-trigger/triggerList",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/tesseract-trigger/addTrigger",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/tesseract-trigger/delete",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/tesseract-trigger/execute",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/tesseract-trigger/start",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/tesseract-trigger/stop",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/tesseract-firedTrigger/stop",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/tesseract-firedTrigger/firedTriggerList",method:"get",params:e})}},a888:function(e,t,n){"use strict";n("c041"),n("40c5"),n("23cc");var r={bind:function(e,t,n){var r=e.querySelector(".el-dialog__header"),l=e.querySelector(".el-dialog");r.style.cssText+=";cursor:move;",l.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();r.onmousedown=function(e){var t=e.clientX-r.offsetLeft,a=e.clientY-r.offsetTop,i=l.offsetWidth,c=l.offsetHeight,s=document.body.clientWidth,u=document.body.clientHeight,g=l.offsetLeft,d=s-l.offsetLeft-i,f=l.offsetTop,p=u-l.offsetTop-c,m=o(l,"left"),b=o(l,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/\%/g,"")/100),b=+document.body.clientHeight*(+b.replace(/\%/g,"")/100)):(m=+m.replace(/\px/g,""),b=+b.replace(/\px/g,"")),document.onmousemove=function(e){var r=e.clientX-t,o=e.clientY-a;-r>g?r=-g:r>d&&(r=d),-o>f?o=-f:o>p&&(o=p),l.style.cssText+=";left:".concat(r+m,"px;top:").concat(o+b,"px;"),n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},l=function(e){e.directive("el-drag-dialog",r)};window.Vue&&(window["el-drag-dialog"]=r,Vue.use(l)),r.install=l;t["a"]=r}}]);