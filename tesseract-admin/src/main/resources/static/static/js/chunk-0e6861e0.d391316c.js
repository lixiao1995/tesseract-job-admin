(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6861e0","chunk-2d0c96ec"],{"23ba":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return a}));var o=n("b775");function r(e){return Object(o["a"])({url:"/tesseract-group/allGroup",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/tesseract-group/groupList",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/tesseract-group/addGroup",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/tesseract-group/deleteGroup",method:"get",params:e})}},"58b5":function(e,t,n){"use strict";n.r(t);n("2a40");t["default"]={}},"740b":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return a}));var o=n("b775");function r(e){return Object(o["a"])({url:"/tesseract-executor/executorList",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/tesseract-executor/executorListNoDetail",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/tesseract-executor/addExecutor",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/tesseract-executor/deleteExecutor",method:"get",params:e})}},a888:function(e,t,n){"use strict";n("c041"),n("40c5"),n("23cc");var o={bind:function(e,t,n){var o=e.querySelector(".el-dialog__header"),r=e.querySelector(".el-dialog");o.style.cssText+=";cursor:move;",r.style.cssText+=";top:0px;";var c=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();o.onmousedown=function(e){var t=e.clientX-o.offsetLeft,l=e.clientY-o.offsetTop,a=r.offsetWidth,u=r.offsetHeight,i=document.body.clientWidth,s=document.body.clientHeight,d=r.offsetLeft,f=i-r.offsetLeft-a,p=r.offsetTop,g=s-r.offsetTop-u,m=c(r,"left"),x=c(r,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/\%/g,"")/100),x=+document.body.clientHeight*(+x.replace(/\%/g,"")/100)):(m=+m.replace(/\px/g,""),x=+x.replace(/\px/g,"")),document.onmousemove=function(e){var o=e.clientX-t,c=e.clientY-l;-o>d?o=-d:o>f&&(o=f),-c>p?c=-p:c>g&&(c=g),r.style.cssText+=";left:".concat(o+m,"px;top:").concat(c+x,"px;"),n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},r=function(e){e.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(r)),o.install=r;t["a"]=o},e241:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.getters.buttons.contains("/executor/index/select")?n("div",{staticClass:"app-container"},[n("el-row",[n("el-form",{attrs:{inline:!0,model:e.selectInfo}},[n("div",{staticStyle:{display:"inline"}},[n("el-form-item",{attrs:{label:"执行器名称"}},[n("el-input",{attrs:{placeholder:"执行器名称"},model:{value:e.selectInfo.name,callback:function(t){e.$set(e.selectInfo,"name",t)},expression:"selectInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"创建人"}},[n("el-input",{attrs:{placeholder:"创建人"},model:{value:e.selectInfo.creator,callback:function(t){e.$set(e.selectInfo,"creator",t)},expression:"selectInfo.creator"}})],1),e._v(" "),n("el-form-item",[e.$store.getters.buttons.contains("/executor/index/select")?n("el-button",{attrs:{type:"primary"},on:{click:e.getExecutorList}},[e._v("查询\n          ")]):e._e()],1)],1),e._v(" "),n("el-form-item",[e.$store.getters.buttons.contains("/executor/index/add")?n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addExecutorBtn(null)}}},[e._v("新增执行器\n        ")]):e._e()],1)],1)],1),e._v(" "),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.executorList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.executor.id))])]}}],null,!1,1256042882)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"名字"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.executor.name))])]}}],null,!1,3029923272)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.executor.description))])]}}],null,!1,1427793513)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"执行器组"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.executor.groupName))])]}}],null,!1,1026865687)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"在线机器"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.executorDetailList,(function(t){return n("span",{staticStyle:{color:"#67C23A","font-weight":"bold"}},[e._v(e._s(t.socket)),n("br")])}))}}],null,!1,479153564)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建者"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.executor.creator))])]}}],null,!1,2062529523)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0==t.row.executor.createTime?"":e.parseTime(t.row.executor.createTime)))])]}}],null,!1,4226142514)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$store.getters.buttons.contains("/executor/index/edit")?n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-edit"},on:{click:function(n){return e.addExecutorBtn(t.row)}}},[e._v("\n            修改\n          ")]):e._e(),e._v(" "),e.$store.getters.buttons.contains("/executor/index/delete")?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(n){return e.deleteExecutor(t.row)}}},[e._v("\n            删除\n          ")]):e._e()]}}],null,!1,1477588818)})],1)],1),e._v(" "),n("el-row",[n("el-pagination",{attrs:{total:e.selectInfo.total,"current-page":e.selectInfo.currentPage,"page-size":e.selectInfo.pageSize,align:"center",background:"",layout:"prev, pager, next"},on:{"current-change":e.pageChange}})],1),e._v(" "),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogTableVisible,title:"执行器信息"},on:{"update:visible":function(t){e.dialogTableVisible=t},dragDialog:e.handleDrag}},[n("el-form",{ref:"executorForm",attrs:{inline:!1,model:e.executorInfo,rules:e.executorRules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"触发器名字",prop:"name"}},[n("el-input",{ref:"name",attrs:{placeholder:"触发器名字"},model:{value:e.executorInfo.name,callback:function(t){e.$set(e.executorInfo,"name",t)},expression:"executorInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"执行器组",prop:"group"}},[n("el-select",{attrs:{placeholder:"执行器组"},model:{value:e.executorInfo.groupId,callback:function(t){e.$set(e.executorInfo,"groupId",t)},expression:"executorInfo.groupId"}},e._l(e.groupList,(function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"触发器描述",prop:"description"}},[n("el-input",{ref:"name",attrs:{placeholder:"触发器描述"},model:{value:e.executorInfo.description,callback:function(t){e.$set(e.executorInfo,"description",t)},expression:"executorInfo.description"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.saveExecutor}},[e._v("保存")])],1)],1)],1)],1):n("div",{staticClass:"app-container"},[n("p",{staticStyle:{color:"red"}},[e._v("您当前没有权限")])])},r=[],c=(n("7cfd"),n("a888")),l=n("740b"),a=n("ed08"),u=n("23ba"),i=(n("58b5"),n("2a40")),s={name:"Executor",directives:{elDragDialog:c["a"]},data:function(){return{listLoading:!0,executorRules:{name:[{required:!0,message:"输入名字",executor:"blur"}],description:[{required:!0,message:"输入执行器描述",executor:"blur"}]},executorList:[],selectInfo:{currentPage:1,pageSize:10,total:0},dialogTableVisible:!1,executorInfo:{name:null,description:null,groupId:null},groupList:[]}},mounted:function(){this.getExecutorList()},methods:{addExecutorBtn:function(e){var t=this;i["a"].clearObject(this.executorInfo),Object(u["c"])().then((function(n){0!=n.length?(t.groupList.splice(0,t.groupList.length),t.groupList=t.groupList.concat(n),t.groupMap=i["a"].listToObjectMap(n,"id"),e?(t.executorInfo.id=e.executor.id,t.executorInfo.name=e.executor.name,t.executorInfo.groupId=e.executor.groupId,t.executorInfo.description=e.executor.description):t.executorInfo.groupId=n[0].id,t.dialogTableVisible=!0):t.$alert("请先创建组")}))},pageChange:function(e){this.selectInfo.currentPage=e,this.getExecutorList()},parseTime:a["d"],getExecutorList:function(){var e=this;Object(l["c"])(this.selectInfo).then((function(t){e.selectInfo.currentPage=t.pageInfo.currentPage,e.selectInfo.pageSize=t.pageInfo.pageSize,e.selectInfo.total=t.pageInfo.total,e.executorList=t.executorList,e.listLoading=!1}))},handleDrag:function(){this.$refs.select.blur()},saveExecutor:function(){var e=this;this.$refs.executorForm.validate((function(t){if(!t)return e.$alert("表单填写错误"),!1;if(null!=e.executorInfo.groupId){var n=e.groupMap.get(e.executorInfo.groupId);e.executorInfo.groupName=n.name,e.executorInfo.mail=n.mail,Object(l["a"])(e.executorInfo).then((function(){e.$alert("保存成功"),e.getExecutorList(),e.dialogTableVisible=!1}))}else e.$alert("请选择组")}))},deleteExecutor:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])({executorId:e.executor.id}).then((function(){t.$alert("保存成功"),t.getExecutorList(),t.dialogTableVisible=!1}))}))}}},d=s,f=n("4e82"),p=Object(f["a"])(d,o,r,!1,null,"365aa0ec",null);t["default"]=p.exports}}]);